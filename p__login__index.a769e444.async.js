(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{A8du:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return x}));t("14J3");var c=t("BMrR"),r=(t("+L6B"),t("2/Rp")),n=(t("jCWc"),t("kPKH")),i=(t("5NDa"),t("5rEg")),s=(t("miYZ"),t("tsqr")),l=t("tJVT"),o=(t("tU7J"),t("wFql")),b=t("q1tI"),d=t("9kvl"),u=t("7AqN"),p=t("qeWU"),j=t("ITvK"),h=t.n(j),f=t("TSYQ"),m=t.n(f),_=t("nKUr"),O=o["a"].Text,v=o["a"].Title;function x(){var e=Object(d["c"])(),a=Object(u["h"])(),t=a.query,o=Object(b["useState"])(""),j=Object(l["a"])(o,2),f=j[0],x=j[1],w=Object(b["useState"])(""),g=Object(l["a"])(w,2),N=g[0],k=g[1],y=Object(b["useState"])(0),I=Object(l["a"])(y,2),T=I[0],R=I[1];Object(b["useEffect"])((()=>{var e=window,a=e.firebase;a&&!a.apps.length&&a.initializeApp({apiKey:"AIzaSyDyomhwwuswMtBXwPdrJFou4o_fTd_Wws0",authDomain:"scbauth.firebaseapp.com",projectId:"scbauth",storageBucket:"scbauth.appspot.com",messagingSenderId:"672808224341",appId:"1:672808224341:web:7caa38ad98f64c7aefb6dc",measurementId:"G-87XFBWBW81"})}),[]);var q=window,S=q.firebase,W=()=>{q.confirmationResult&&q.confirmationResult.confirm(N).then((function(a){e({type:"login/verifyCode",payload:{account:f,code:N,callback:(e,a)=>{Object(p["f"])(e,a),d["a"].push(t.redirectURL||"/")}}})})).catch((function(e){s["default"].error("Invalid code or code expired")}))},C=()=>{q.recaptchaVerifier=new S.auth.RecaptchaVerifier("sign-in-button",{size:"invisible",callback:J,"expired-callback":()=>{s["default"].error("Request expired, please try again.")},"error-callback\t":()=>{s["default"].error("Network error, please try again.")}}),q.recaptchaVerifier.verify()},J=e=>{S.auth().signInWithPhoneNumber("+86".concat(f),q.recaptchaVerifier).then((e=>{q.confirmationResult=e,R(59)})).catch((e=>{q.recaptchaVerifier&&(R(1),q.recaptchaVerifier.render().then((e=>{q.grecaptcha.reset(e)})))}))};Object(b["useEffect"])((()=>{if(!(T>=60||T<=0)){var e=setTimeout((()=>{R(T-1)}),1e3);return()=>{clearTimeout(e)}}}),[T]);var V=e=>{var a=e.target.value;x(a)};return Object(_["jsx"])("div",{className:h.a.container,children:Object(_["jsxs"])("div",{className:h.a.box,children:[Object(_["jsx"])(v,{className:h.a.title,level:3,children:"Welcome to Igloo"}),Object(_["jsx"])(O,{className:h.a.label,children:"Phone Number"}),Object(_["jsx"])(i["a"],{className:h.a.input,value:f,onChange:V,disabled:T>0}),Object(_["jsxs"])(c["a"],{justify:"space-between",className:h.a.label,children:[Object(_["jsx"])(n["a"],{children:Object(_["jsx"])(O,{className:h.a.label,children:"OTP"})}),Object(_["jsx"])(n["a"],{onClick:f?C:()=>{},className:m()({[h.a.disabled]:!f}),children:Object(_["jsx"])(r["a"],{type:"text",className:h.a.send,children:T<=0?Object(_["jsx"])("a",{id:"sign-in-button",children:"Send OTP"}):Object(_["jsx"])("div",{className:h.a.count,children:"".concat(T,"(S)")})})})]}),Object(_["jsx"])(i["a"],{className:h.a.input,value:N,onChange:e=>{k(e.target.value)}}),Object(_["jsx"])(r["a"],{type:"primary",disabled:!f||!N||!q.confirmationResult,className:h.a.button,onClick:W,children:"Log in"})]})})}},ITvK:function(e,a,t){e.exports={container:"container___24lE3",box:"box___31J3j",disabled:"disabled___3qk30",title:"title___3F8Ha",label:"label___38Rsn",button:"button___3LXqW",count:"count___kwvLA",input:"input___3COIa",send:"send___1GwpN",terms:"terms___bgfnt"}}}]);